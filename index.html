<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lista Viaggio Completa</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f0f5f9; }
        .container { max-width: 900px; margin: auto; }
        h1, h2 { color: #2a5d84; text-align: center; }
        select, input { padding: 8px; width: 100%; margin-bottom: 10px; }
        button { cursor: pointer; padding: 8px 15px; margin: 5px; border: none; border-radius: 5px; }
        #categories { margin: 15px 0; display: flex; flex-wrap: wrap; gap: 8px; }
        .category-btn { background: #4a89dc; color: white; }
        #suggestions { display: flex; flex-wrap: wrap; gap: 8px; }
        .suggestion { background: #e3e9f2; padding: 5px 10px; border-radius: 5px; cursor: pointer; }
        #list { list-style: none; padding: 0; }
        #list li { background: white; margin: 5px 0; padding: 10px; border-radius: 5px; display: flex; align-items: center; flex-wrap: wrap; }
        .checked { text-decoration: line-through; color: #888; }
        .removeBtn { margin-left: auto; background: #e74c3c; color: white; padding: 5px 10px; border-radius: 3px; }
        .quantityInput { width: 50px; margin: 0 10px; padding: 5px; text-align: center; }
        #addBtn { background: #27ae60; }
        #exportBtn { background: #3498db; }
        #whatsappBtn { background: #25D366; }
        .itemText { flex-grow: 1; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úàÔ∏è Lista Viaggio Completa</h1>
        
        <select id="tripType">
            <option value="">-- Seleziona viaggio --</option>
            <option value="mare">üèñÔ∏è Mare</option>
            <option value="montagna">‚õ∞Ô∏è Montagna</option>
            <option value="citta">üèôÔ∏è Citt√†</option>
        </select>
        
        <div id="categories"></div>
        <div id="suggestions"></div>
        
        <h2>üìù La tua lista</h2>
        <ul id="list"></ul>
        
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <input type="text" id="newItem" placeholder="Oggetto" style="flex: 3;">
            <input type="number" min="1" value="1" id="newQuantity" placeholder="Q.t√†" style="flex: 1;">
            <button id="addBtn" onclick="addCustomItem()">‚ûï Aggiungi</button>
        </div>
        
        <div style="margin-top: 20px;">
            <button id="exportBtn" onclick="exportPDF()">üì§ Esporta PDF</button>
            <button id="whatsappBtn" onclick="shareWhatsApp()">üí¨ WhatsApp</button>
        </div>
    </div>

    <script>
        const tripData = {
            mare: {
                "Abbigliamento üëï": [
                    "Costume da bagno ü©±", "T-shirt üëï", "Pantaloncini üëñ", "Canottiere ü©≥", 
                    "Vestiti leggeri üëó", "Gonna üëö", "Camicia di lino üëî", "Pigiama üõå", 
                    "Intimo ü©≤", "Calzini leggeri üß¶", "Cappello üß¢", "Occhiali da sole üï∂Ô∏è", 
                    "Foulard üß£", "Maglia maniche lunghe üß•", "Giacca antivento üß•", "Pareo üèñÔ∏è", 
                    "Sottoveste leggera ü©≤"
                ],
                "Protezione üß¥": [
                    "Crema SPF 50 üß¥", "Stick labbra SPF üíã", "Doposole üß¥", "Spray repellente ü¶ü", 
                    "Aloe vera üå±", "Salviette umidificate üßª", "Disinfettante mani üß¥", 
                    "Crema viso SPF üß¥", "Shampoo doposole üß¥", "Balsamo doposole üß¥", 
                    "Spray rinfrescante üå¨Ô∏è", "Crema scottature üß¥", "Cappello tesa larga üß¢", 
                    "Olio idratante üß¥", "Borraccia termica üßä", "Termometro üå°Ô∏è", "Specchietto ü™û"
                ]
            },
            montagna: {
                "Abbigliamento üß•": [
                    "Giacca termica üß•", "Maglia tecnica üëï", "Pantaloni trekking üëñ", "Guanti üß§", 
                    "Cappello üß¢", "Scarponi ü•æ", "Calze üß¶", "Zaino üéí", "Felpa üß•", "Sottoveste ü©≤", 
                    "Giacca antivento üß•", "Copricapo impermeabile üß¢", "Pile üß•", "Calzoncini ü©≥", 
                    "Gilet üß•", "Bandana üß£", "Calze termiche üß¶"
                ],
                "Sicurezza üßó": [
                    "Bastoni ü¶Ø", "Mappa üó∫Ô∏è", "Bussola üß≠", "Kit soccorso ü©π", "Fischietto ü¶Ø", 
                    "Torcia üî¶", "Coltellino üî™", "Corda ü™¢", "Power bank üîã", "Termos ‚òï", 
                    "GPS üì°", "Radio üìª", "Tenda ‚õ∫", "Sacco a pelo üõå", "Piccozza ‚õèÔ∏è", 
                    "Cramponi üßä", "Filtro acqua üö∞"
                ]
            },
            citta: {
                "Documenti ü™™": [
                    "Carta identit√† ü™™", "Passaporto üõÇ", "Biglietti üé´", "Tessera ü™™", 
                    "Contanti üí∂", "Carta credito üí≥", "Mappa üó∫Ô∏è", "Assicurazione üìÑ", 
                    "Penna üñäÔ∏è", "Taccuino üìì", "Tessera trasporti üöá", "Visti üõÉ", 
                    "Fotocopie documenti üìë", "Indirizzi üìá", "Prenotazioni üè®", 
                    "Lista contatti üìû", "QR code üì≤"
                ]
            }
        };

        // Funzioni
        document.getElementById('tripType').addEventListener('change', function() {
            const tripType = this.value;
            const categoriesDiv = document.getElementById('categories');
            categoriesDiv.innerHTML = '';
            
            if (tripData[tripType]) {
                Object.keys(tripData[tripType]).forEach(cat => {
                    const btn = document.createElement('button');
                    btn.className = 'category-btn';
                    btn.textContent = cat;
                    btn.onclick = () => showSuggestions(tripType, cat);
                    categoriesDiv.appendChild(btn);
                });
            }
        });

        function showSuggestions(tripType, cat) {
            const suggestions = tripData[tripType][cat] || [];
            const box = document.getElementById('suggestions');
            box.innerHTML = '';
            
            suggestions.slice(0, 10).forEach(item => { // Mostra primi 10 suggerimenti
                const div = document.createElement('div');
                div.className = 'suggestion';
                div.textContent = item;
                div.onclick = () => addItem(item, 1);
                box.appendChild(div);
            });
        }

        function addItem(item, qty = 1) {
            const li = document.createElement('li');
            
            const span = document.createElement('span');
            span.className = 'itemText';
            span.textContent = item;
            
            const input = document.createElement('input');
            input.type = 'number';
            input.min = '1';
            input.value = qty;
            input.className = 'quantityInput';
            
            const removeBtn = document.createElement('button');
            removeBtn.className = 'removeBtn';
            removeBtn.textContent = '‚ùå';
            removeBtn.onclick = (e) => {
                e.stopPropagation();
                li.remove();
            };
            
            li.appendChild(span);
            li.appendChild(input);
            li.appendChild(removeBtn);
            li.onclick = () => li.classList.toggle('checked');
            document.getElementById('list').appendChild(li);
        }

        function addCustomItem() {
            const item = document.getElementById('newItem').value.trim();
            const qty = document.getElementById('newQuantity').value || 1;
            
            if (item) {
                addItem(item, qty);
                document.getElementById('newItem').value = '';
                document.getElementById('newQuantity').value = 1;
            }
        }

        function exportPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFontSize(18);
            doc.text("Lista Viaggio", 10, 15);
            doc.setFontSize(12);
            
            let y = 30;
            document.querySelectorAll('#list li').forEach(li => {
                const item = li.querySelector('.itemText').textContent;
                const qty = li.querySelector('.quantityInput').value;
                doc.text(`‚Ä¢ ${item} (x${qty})`, 10, y);
                y += 10;
            });
            
            doc.save('lista_viaggio.pdf');
        }

        function shareWhatsApp() {
            let text = "Lista viaggio:\n";
            document.querySelectorAll('#list li').forEach(li => {
                const item = li.querySelector('.itemText').textContent;
                const qty = li.querySelector('.quantityInput').value;
                text += `- ${item} (x${qty})\n`;
            });
            
            const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
